import router from '@ohos.router';
import { common } from '@kit.AbilityKit'; // ğŸ‘ˆ ä¿®å¤ 1ï¼šå¯¼å…¥ common å‘½åç©ºé—´
import { PreferenceManager } from '../../../services/PreferenceManager';

@Entry
@Component
struct SettingsPage {
  // @StorageLink('show_guide') isGuideEnabled: boolean = false;
  @StorageLink('show_guide_manual') show_guide_manual: boolean = false;

  build() {
    Column() {
      // é¡¶éƒ¨å¯¼èˆªæ 
      Row() {
        Text('è®¾ç½®')
          .fontSize(20)
          .fontWeight(FontWeight.Bold)
      }
      .width('100%')
      .padding(16)
      .backgroundColor('#F1F3F5')

      // å¼€å…³è¡Œ
      Row() {
        Column() {
          Text('é‡æ–°æ’­æ”¾å¼•å¯¼åŠ¨ç”»')
            .fontSize(16)
          Text('å¼€å¯åï¼Œä¸‹æ¬¡å¯åŠ¨å°†å±•ç¤ºå¼•å¯¼')
            .fontSize(12)
            .fontColor(Color.Gray)
        }.alignItems(HorizontalAlign.Start)

        Blank() // è‡ªåŠ¨æ’‘å¼€ä¸­é—´è·ç¦»
        Toggle({ type: ToggleType.Switch, isOn: AppStorage.get<boolean>('show_guide_manual') })
          .onChange(async (isOn: boolean) => {
            AppStorage.setOrCreate('show_guide_manual', isOn);
            const context = getContext(this) as common.UIAbilityContext;
            await PreferenceManager.put(context, 'show_guide_manual', isOn);
          })
      }
      .width('100%')
      .padding(16)
      .backgroundColor(Color.White)

      Divider()
    }
    .width('100%')
    .height('100%')
    .backgroundColor('#F1F3F5')
  }
}